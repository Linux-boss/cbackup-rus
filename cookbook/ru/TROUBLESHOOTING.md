# Troubleshooting

**Ошибка `"Can't get settings from API"`**<br>
Отображается, когда Java-демон не может подключиться к API по HTTP. Проверьте доступность API. Возможный вариант проверки:
  ```bash
  curl -I `cat /opt/cbackup/bin/application.properties | grep "\.site=" | cut -d'=' -f 2`?r=v1%2Fcore%2Fget-tasks  
  ``` 
  * Если ответ `401 Unauthorized`, API доступен по адресу, указанному в application.properties и следует проверить логин и пароль для Java-сервиса
  * Если код ответа `302` или `200`, значит адрес API указан неверно.

---

**Что такое `Неизвестные устройства`**<br>
Раздел `Неизвестные устройства` служит для установки связей между атрибутами устройств и связкой "вендор-модель". Неважно, в какой подсети и с каким IP-адресом система нашла _"неизвестное устройство"_. Это сигнал от cBackup, что нужно "объяснить", как с этим устройством работать - нажмите [+], чтобы проассоциировать с уже существующим устройством. Или добавьте новое, если механика работы с ним повторяет механику работы с аналогичным устройством.

---

**Не отображаются версии резервных копий**<br>
Чтобы отображались diff'ы, нужно чтобы после резервной копии отработала задача `git_commit`. При необходимости можно запустить её вручную. А при выполнении резервного копирования по расписанию, убедитесь, что `git_commit` отрабатывает _после_ того, как будут обработаны все узлы.

---

**В логах или в истории отображается неверное время**<br>
Проверьте и настройте время в системе ___и___ в `php.ini` секции `date.timezone`

---

**Можно ли сделать, чтобы имя файла backup'a было равно имени ноды?**<br>
Нет, нельзя - имя файла должно быть уникальным, а это может обеспечить только ID узла. Имена могут быть неуникальны или вообще не заданы.

---

**В списке задач нет задачи `git_commit`**<br>
Ниспадающие списки задач, переменных и т.п. можно скроллить, почему данный факт часто упускается из виду :)

---

**После изменений в расписании задач ничего не поменялось**<br>
Необходимо перезагрузить внутренний планировщик сервиса. Автоматически это делать - плохая идея, т.к. в момент изменения расписания _уже_ может обрабатываться пара тысяч устройств. Рестарт в этот момент нарушит целостность процесса.

---

**Виджет состояния сервиса показывает только "Java планировщик запущен", а первая строка красная**<br>

* Убедитесь, что указан верный логин и пароль для пользователя, который соединяется с сервером по SSH и запрашивает статус сервиса. 
* Убедитесь, что в `/opt/cbackup/config/settings.ini` параметр `serviceType` соответствует вашей операционной системе. Для Centos 6 это должен быть `init.d`, для Centos 7 `system.d` и так далее по аналогии. SysVinit системам указывайте `init.d`, а системам с systemctl уже `system.d`

---

**Как понять, что не так с сервисом в виджете?**<br>
Текст сообщения об ошибке можно прочитать, наведя на красный треугольник в левой части соответствующего ряда. Верхний ряд - собственно сам демон, нижний ряд - внутренний планировщик демона.
